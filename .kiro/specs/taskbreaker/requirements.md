# Requirements Document

## Introduction

TaskBreaker is an AI-powered task planning application that helps users break down complex tasks into manageable subtasks with intelligent scheduling. The system provides user authentication, task management, AI-driven task decomposition, and personalized scheduling based on user preferences. The application consists of a Next.js 14 frontend and an AWS serverless backend using Lambda, DynamoDB, S3, and Cognito.

## Glossary

- **TaskBreaker System**: The complete full-stack application including frontend and backend components
- **User**: An authenticated individual who creates and manages task plans
- **Task Plan**: A user-created task that includes AI-generated subtasks and scheduling
- **Subtask**: An individual work item generated by AI as part of a larger task plan
- **Schedule**: A time-based allocation of subtasks across days or hours
- **Cognito Service**: AWS Cognito authentication service managing user identity
- **DynamoDB Service**: AWS DynamoDB database service storing user and task data
- **S3 Service**: AWS S3 storage service for user avatars and exports
- **AI Service**: Bedrock AI integration service for generating task breakdowns
- **Frontend Application**: Next.js 14 React application providing user interface
- **Backend API**: Express.js application running on AWS Lambda handling business logic
- **API Gateway**: AWS API Gateway routing HTTP requests to Lambda functions
- **Time Mode**: User-specified constraint for task completion (days or hours)
- **User Preferences**: Configurable settings including maximum hours per day and work days
- **Avatar**: User profile image stored in S3
- **JWT Token**: JSON Web Token issued by Cognito for authentication

## Requirements

### Requirement 1

**User Story:** As a new user, I want to sign up for an account, so that I can access the TaskBreaker system and create task plans.

#### Acceptance Criteria

1. WHEN a user submits valid email and password credentials THEN the Cognito Service SHALL create a new user account
2. WHEN a user submits an email that already exists THEN the TaskBreaker System SHALL reject the signup and return an error message
3. WHEN a user successfully signs up THEN the DynamoDB Service SHALL create a user record in the Users table
4. WHEN a user record is created THEN the TaskBreaker System SHALL initialize default user preferences with maxHoursPerDay set to 8 and workDays set to Monday through Friday
5. WHEN signup completes THEN the Cognito Service SHALL return access token, ID token, and refresh token

### Requirement 2

**User Story:** As a registered user, I want to log in to my account, so that I can access my task plans and dashboard.

#### Acceptance Criteria

1. WHEN a user submits valid email and password credentials THEN the Cognito Service SHALL authenticate the user and return JWT tokens
2. WHEN a user submits invalid credentials THEN the TaskBreaker System SHALL reject the login and return an authentication error
3. WHEN authentication succeeds THEN the Backend API SHALL return accessToken, idToken, and refreshToken to the Frontend Application
4. WHEN the Frontend Application receives tokens THEN the TaskBreaker System SHALL store tokens securely for subsequent requests
5. WHEN a user is authenticated THEN the Backend API SHALL validate JWT tokens using Cognito JWKS for protected endpoints

### Requirement 3

**User Story:** As an authenticated user, I want to create a new task with time constraints, so that the AI can generate a breakdown and schedule.

#### Acceptance Criteria

1. WHEN a user submits a task name, time mode, and amount THEN the Backend API SHALL validate the input parameters
2. WHEN input validation passes THEN the AI Service SHALL generate subtasks with id, name, duration, priority, and done status
3. WHEN the AI Service generates subtasks THEN the AI Service SHALL create a schedule allocating subtasks across the specified time period
4. WHEN the schedule is created THEN the DynamoDB Service SHALL store the task plan in the TaskPlans table with userId and taskId as keys
5. WHEN the task plan is stored THEN the Backend API SHALL return the complete task plan including subtasks and schedule to the Frontend Application

### Requirement 4

**User Story:** As a user, I want to view all my created task plans, so that I can track my ongoing work and access specific plans.

#### Acceptance Criteria

1. WHEN a user requests their task plans THEN the Backend API SHALL query the TaskPlans table filtering by userId
2. WHEN task plans are retrieved THEN the DynamoDB Service SHALL return all task plans sorted by creation date
3. WHEN the Frontend Application receives task plans THEN the TaskBreaker System SHALL display them in a list format with task name, time mode, and creation date
4. WHEN a user selects a specific task plan THEN the Frontend Application SHALL navigate to the task detail page showing subtasks and schedule

### Requirement 5

**User Story:** As a user, I want to mark subtasks as complete, so that I can track my progress through a task plan.

#### Acceptance Criteria

1. WHEN a user marks a subtask as done THEN the Backend API SHALL update the subtask done status in the TaskPlans table
2. WHEN the subtask status is updated THEN the DynamoDB Service SHALL persist the change with an updated timestamp
3. WHEN the update succeeds THEN the Frontend Application SHALL reflect the completion status visually in the user interface
4. WHEN a user views a task plan THEN the TaskBreaker System SHALL display completed and incomplete subtasks with distinct visual indicators

### Requirement 6

**User Story:** As a user, I want to delete task plans I no longer need, so that I can keep my dashboard organized.

#### Acceptance Criteria

1. WHEN a user requests to delete a task plan THEN the Backend API SHALL verify the task plan belongs to the requesting user
2. WHEN ownership is verified THEN the DynamoDB Service SHALL remove the task plan from the TaskPlans table
3. WHEN deletion succeeds THEN the Backend API SHALL return a success confirmation to the Frontend Application
4. WHEN the Frontend Application receives confirmation THEN the TaskBreaker System SHALL remove the task plan from the displayed list

### Requirement 7

**User Story:** As a user, I want to view a dashboard showing today's subtasks, so that I can focus on my current work.

#### Acceptance Criteria

1. WHEN a user accesses the dashboard THEN the Backend API SHALL retrieve all active task plans for the user
2. WHEN task plans are retrieved THEN the TaskBreaker System SHALL filter subtasks scheduled for the current day
3. WHEN today's subtasks are identified THEN the Frontend Application SHALL display them in priority order
4. WHEN the dashboard loads THEN the TaskBreaker System SHALL show task plan summaries including progress indicators

### Requirement 8

**User Story:** As a user, I want to upload a profile avatar, so that I can personalize my account.

#### Acceptance Criteria

1. WHEN a user selects an image file THEN the Frontend Application SHALL validate the file type is an accepted image format
2. WHEN validation passes THEN the Backend API SHALL upload the image to the S3 Service with the path avatars slash userId
3. WHEN the upload succeeds THEN the S3 Service SHALL return the avatar URL
4. WHEN the avatar URL is received THEN the DynamoDB Service SHALL update the user record in the Users table with the avatarUrl
5. WHEN the user record is updated THEN the Frontend Application SHALL display the new avatar image

### Requirement 9

**User Story:** As a user, I want to edit my profile information and preferences, so that I can customize how the system generates schedules.

#### Acceptance Criteria

1. WHEN a user updates their name THEN the DynamoDB Service SHALL persist the change to the Users table
2. WHEN a user modifies maxHoursPerDay preference THEN the TaskBreaker System SHALL validate the value is a positive number
3. WHEN a user selects work days THEN the TaskBreaker System SHALL store the selected days as an array in user preferences
4. WHEN preferences are updated THEN the AI Service SHALL use the new preferences for future task plan generation
5. WHEN profile updates succeed THEN the Frontend Application SHALL display a confirmation message

### Requirement 10

**User Story:** As a user, I want the system to authenticate my requests, so that my data remains secure and private.

#### Acceptance Criteria

1. WHEN a user makes a request to a protected endpoint THEN the Backend API SHALL extract the JWT token from the Authorization header
2. WHEN the token is extracted THEN the Backend API SHALL validate the token using Cognito JWKS
3. WHEN token validation fails THEN the Backend API SHALL return a 401 unauthorized error
4. WHEN token validation succeeds THEN the Backend API SHALL extract the userId from the token and attach it to the request context
5. WHEN the userId is attached THEN the Backend API SHALL use it to filter and authorize data access

### Requirement 11

**User Story:** As a system administrator, I want the backend deployed as serverless infrastructure, so that the system scales automatically and reduces operational costs.

#### Acceptance Criteria

1. WHEN the backend is deployed THEN the AWS SAM Framework SHALL create a Cognito User Pool and User Pool Client
2. WHEN infrastructure is provisioned THEN the AWS SAM Framework SHALL create DynamoDB tables for Users and TaskPlans with appropriate keys
3. WHEN storage is configured THEN the AWS SAM Framework SHALL create an S3 bucket named taskbreaker-app-bucket
4. WHEN the Lambda function is deployed THEN the AWS SAM Framework SHALL configure it with nodejs18.x runtime and appropriate environment variables
5. WHEN API Gateway is configured THEN the AWS SAM Framework SHALL route all requests matching ANY slash proxy plus to the Lambda function

### Requirement 12

**User Story:** As a developer, I want the AI service to generate realistic task breakdowns, so that users receive valuable scheduling assistance.

#### Acceptance Criteria

1. WHEN the AI Service receives a task name, time mode, and amount THEN the AI Service SHALL generate between 3 and 10 subtasks
2. WHEN subtasks are generated THEN the AI Service SHALL assign each subtask a duration in minutes or hours format
3. WHEN subtasks are created THEN the AI Service SHALL assign priority levels of High, Medium, or Low
4. WHEN scheduling subtasks THEN the AI Service SHALL distribute subtasks across the specified time period respecting user preferences
5. WHEN the plan is complete THEN the AI Service SHALL calculate and return the total estimated time for all subtasks

### Requirement 13

**User Story:** As a user, I want the frontend to be responsive and mobile-friendly, so that I can access TaskBreaker on any device.

#### Acceptance Criteria

1. WHEN the Frontend Application renders on mobile devices THEN the TaskBreaker System SHALL display a responsive layout using TailwindCSS
2. WHEN navigation is needed THEN the Frontend Application SHALL provide a mobile-friendly navigation component
3. WHEN forms are displayed THEN the Frontend Application SHALL ensure input fields are appropriately sized for touch interaction
4. WHEN task cards are rendered THEN the Frontend Application SHALL stack them vertically on small screens
5. WHEN the viewport size changes THEN the Frontend Application SHALL adapt the layout without requiring page refresh

### Requirement 14

**User Story:** As a user, I want to retrieve my user profile information, so that the application can display my current settings.

#### Acceptance Criteria

1. WHEN a user requests their profile THEN the Backend API SHALL validate the JWT token and extract the userId
2. WHEN the userId is extracted THEN the DynamoDB Service SHALL query the Users table for the user record
3. WHEN the user record is found THEN the Backend API SHALL return the user data including email, name, avatarUrl, and preferences
4. WHEN the user record is not found THEN the Backend API SHALL return a 404 not found error
5. WHEN the Frontend Application receives user data THEN the TaskBreaker System SHALL populate the profile page with current values
